<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Budget â€“ Basic</title>
  <style>
    body { font-family: system-ui; background:#111; color:#eee; margin:0; padding:20px }
    .card { max-width:400px; margin:60px auto; padding:20px; background:#222; border-radius:10px }
    input,button { width:100%; padding:10px; margin:6px 0; border-radius:6px; border:1px solid #444; background:#000; color:#eee }
    button { cursor:pointer; background:#0a84ff; border:none }
    #auth-error { color:#f55; min-height:20px }
    .hidden { display:none }
  </style>
</head>
<body>
  <div id="auth" class="card">
    <h2>Login</h2>
    <input id="email" type="email" placeholder="E-Mail">
    <input id="password" type="password" placeholder="Passwort">
    <button id="loginBtn">Anmelden</button>
    <button id="signupBtn">Registrieren</button>
    <div id="auth-error"></div>
  </div>

  <div id="dashboard" class="card hidden">
    <h2>Dashboard</h2>
    <p>Angemeldet als: <span id="who"></span></p>
    <button id="logout">Abmelden</button>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getAuth, onAuthStateChanged, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBX2SJ69fysC6EhhAUr-RhnwLUz7OvP1Nc",
      authDomain: "budgetyve.firebaseapp.com",
      projectId: "budgetyve",
      storageBucket: "budgetyve.appspot.com",
      messagingSenderId: "675773555711",
      appId: "1:675773555711:web:3f2c7a7bf7ac5d6a507dca"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    const $ = id => document.getElementById(id);
    const authCard = $("auth");
    const dash = $("dashboard");
    const who = $("who");

    $("loginBtn").onclick = async () => {
      try {
        await signInWithEmailAndPassword(auth, $("email").value, $("password").value);
        $("auth-error").textContent = "";
      } catch (err) {
        $("auth-error").textContent = err.message;
      }
    };

    $("signupBtn").onclick = async () => {
      try {
        await createUserWithEmailAndPassword(auth, $("email").value, $("password").value);
        $("auth-error").textContent = "";
      } catch (err) {
        $("auth-error").textContent = err.message;
      }
    };

    $("logout").onclick = () => signOut(auth);

    onAuthStateChanged(auth, user => {
      if (user) {
        authCard.classList.add("hidden");
        dash.classList.remove("hidden");
        who.textContent = user.email;
      } else {
        dash.classList.add("hidden");
        authCard.classList.remove("hidden");
      }
    });
  </script>
</body>
</html>
